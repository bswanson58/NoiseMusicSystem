<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:vml="clr-namespace:Noise.UI.Support" 
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                    xmlns:Adapters="clr-namespace:Noise.UI.Adapters" 
                    xmlns:ValueConverters="clr-namespace:Noise.UI.ValueConverters" 
                    xmlns:Controls="clr-namespace:AC.AvalonControlsLibrary.Controls;assembly=AvalonControlsLibrary"
                    xmlns:NoiseControls="clr-namespace:Noise.UI.Controls" xmlns:Dto="clr-namespace:Noise.UI.Dto" xmlns:system="clr-namespace:System;assembly=mscorlib" mc:Ignorable="d"
					>

    <vml:ViewModelLocator x:Key="ViewModelLocator">
        <vml:ViewModelLocator.Resolver>
            <vml:ViewModelResolver />
        </vml:ViewModelLocator.Resolver>
    </vml:ViewModelLocator>

    <ValueConverters:PublishedYearConverter x:Key="PublishedYearConverter"/>
    <ValueConverters:EmptyStringVisibilityConverter x:Key="EmptyStringVisibilityConverter"/>

    <ContextMenu x:Key="ArtistMenu">
        <MenuItem Header="Rename Artist" Command="{Binding Rename}"/>
    </ContextMenu>

    <HierarchicalDataTemplate x:Key="AlbumTemplate" DataType="{x:Type Dto:UiAlbum}">
        <Grid Margin="0,0,3,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" Margin="3,3,5,3" Content="4" HorizontalAlignment="Center" Command="{Binding PlayAlbum}" Style="{DynamicResource PlayButtonStyle}"/>
            <TextBlock Grid.Column="1" VerticalAlignment="Center" Text="{Binding Name}"/>
            <StackPanel Grid.Column="3" VerticalAlignment="Center"  Orientation="Horizontal">
                <StackPanel Orientation="Horizontal">
                    <StackPanel.Visibility>
                        <MultiBinding Converter="{StaticResource EmptyStringVisibilityConverter}">
                            <Binding Path="PublishedYear" Converter="{StaticResource PublishedYearConverter}"/>
                        </MultiBinding>
                    </StackPanel.Visibility>
                    <TextBlock Text="("/>
                    <TextBlock Text="{Binding PublishedYear, Converter={StaticResource PublishedYearConverter}}"/>
                    <TextBlock Margin="0,0,3,0" Text=")"/>
                </StackPanel>
                <TextBlock Foreground="{DynamicResource ControlTextColor}" Text="Tracks: "/>
                <TextBlock Text="{Binding TrackCount}"/>
            </StackPanel>
        </Grid>
    </HierarchicalDataTemplate>

    <HierarchicalDataTemplate x:Key="ArtistAlbumTemplate" DataType="{x:Type Adapters:ArtistTreeNode}" 
                              ItemTemplate="{StaticResource AlbumTemplate}" ItemsSource="{Binding Children}">
        <Border Margin="0,1,0,2" CornerRadius="3" ContextMenu="{DynamicResource ArtistMenu}" Background="{DynamicResource TreeItemBackground}" BorderBrush="{DynamicResource ControlTextColor}">
            <Grid Margin="3,0,3,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Row="0" Grid.Column="0" FontSize="16" Text="{Binding Artist.Name}"/>
                <StackPanel Grid.Row="0" Grid.Column="2" Orientation="Horizontal">
                    <CheckBox Style="{DynamicResource FavoriteCheckBoxStyle}" Margin="0,9,3,0" IsChecked="{Binding Artist.UiIsFavorite, Mode=TwoWay}"/>
                    <Controls:RatingSelector Margin="0,1,0,0" HorizontalAlignment="Right"  VerticalAlignment="Bottom" Style="{DynamicResource RatingStyle}"
											 Template="{DynamicResource RatingTemplate}" RatingSelected="{Binding Artist.UiRating, Mode=TwoWay}"/>
                </StackPanel>
                <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Margin="11,0,0,0">
                    <TextBlock Foreground="{DynamicResource ControlTextColor}" Text="Albums: "/>
                    <TextBlock Text="{Binding Artist.AlbumCount}"/>
                </StackPanel>
                <TextBlock Grid.Row="1" Grid.Column="2" HorizontalAlignment="Right" Text="{Binding Artist.Genre}"/>
            </Grid>
        </Border>
    </HierarchicalDataTemplate>

    <!-- SearchTextBox -->
    <SolidColorBrush x:Key="SearchTextBox_Background" Color="White" />
    <SolidColorBrush x:Key="SearchTextBox_InactiveBackground" Color="#CCE0F8"/>
    <SolidColorBrush x:Key="SearchTextBox_Foreground" Color="Black" />
    <LinearGradientBrush x:Key="SearchTextBox_Border" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#FFABADB3" Offset="0.05" />
        <GradientStop Color="#FFE2E3EA" Offset="0.07" />
        <GradientStop Color="#FFE4E9EF" Offset="1" />
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="SearchTextBox_BorderMouseOver" StartPoint="0,0" EndPoint="0,1">
        <GradientStop Color="#FF5C97C1" Offset="0.05" />
        <GradientStop Color="#FFB9D7EB" Offset="0.07" />
        <GradientStop Color="#FFC7E2F1" Offset="1" />
    </LinearGradientBrush>
    <SolidColorBrush x:Key="SearchTextBox_SearchIconBorder" Color="White" />
    <SolidColorBrush x:Key="SearchTextBox_SearchIconBackground" Color="White" />
    <LinearGradientBrush x:Key="SearchTextBox_SearchIconBorder_MouseOver" StartPoint="0,0" EndPoint="0,1" >
        <GradientStop Color="#FFFFFFFF" Offset="0" />
        <GradientStop Color="#FFE5F4FC" Offset="1" />
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="SearchTextBox_SearchIconBackground_MouseOver" StartPoint="0,0" EndPoint="0,1" >
        <GradientStop Color="#FFE7F5FD" Offset="0" />
        <GradientStop Color="#FFD2EDFC" Offset="0.5" />
        <GradientStop Color="#FFB6E3FD" Offset="0.51" />
        <GradientStop Color="#FF9DD5F3" Offset="1" />
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="SearchTextBox_SearchIconBorder_MouseDown" StartPoint="0,0" EndPoint="0,1" >
        <GradientStop Color="#FFFFFFFF" Offset="0" />
        <GradientStop Color="#FFE5F4FC" Offset="1" />
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="SearchTextBox_SearchIconBackground_MouseDown" StartPoint="0,0" EndPoint="0,1" >
        <GradientStop Color="#FFE7F5FD" Offset="0" />
        <GradientStop Color="#FFD2EDFC" Offset="0.5" />
        <GradientStop Color="#FFB6E3FD" Offset="0.51" />
        <GradientStop Color="#FF9DD5F3" Offset="1" />
    </LinearGradientBrush>
    <SolidColorBrush x:Key="SearchTextBox_LabelTextColor" Color="Gray" />

    <Style x:Key="{x:Type NoiseControls:SearchTextBox}" TargetType="{x:Type NoiseControls:SearchTextBox}">
        <Setter Property="Background" Value="{StaticResource SearchTextBox_Background}" />
        <Setter Property="BorderBrush" Value="{StaticResource SearchTextBox_Border}" />
        <Setter Property="Foreground" Value="{StaticResource SearchTextBox_Foreground}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="SnapsToDevicePixels" Value="True" />
        <Setter Property="LabelText" Value="Search" />
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="LabelTextColor" Value="{StaticResource SearchTextBox_LabelTextColor}" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type NoiseControls:SearchTextBox}">
                    <Border x:Name="Border"
				  Background="{TemplateBinding Background}"
				  BorderBrush="{TemplateBinding BorderBrush}"
				  BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid x:Name="LayoutGrid">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <ScrollViewer Margin="2" x:Name="PART_ContentHost" Grid.Column="0" VerticalAlignment="Center"/>
                            <Label x:Name="LabelText"
						 Margin="2"
						 Grid.Column="0"
						 Foreground="{Binding LabelTextColor, RelativeSource={RelativeSource TemplatedParent}}"
						 Content="{Binding LabelText, RelativeSource={RelativeSource TemplatedParent}}"
						 Padding="2,0,0,0"
						 VerticalAlignment="Center"
						 FontStyle="Italic" />

                            <Border x:Name="PART_SpecifySearchType"
						  Grid.Column="1"
						  VerticalAlignment="Stretch"
						  HorizontalAlignment="Stretch"
						  BorderBrush="{StaticResource SearchTextBox_SearchIconBorder}"
						  >
                                <Image x:Name="SpecifySearchType"
							   Stretch="None"
							   Width="17"
							   Height="15" 
							   HorizontalAlignment="Center"
							   VerticalAlignment="Center"
							   Source="pack://application:,,,/Noise.UI;component/Resources/SearchCategory.png" ToolTip="Search Options"
							   
							   />
                            </Border>

                            <Border x:Name="PART_SearchIconBorder"
						  Grid.Column="2"
						  VerticalAlignment="Stretch"
						  HorizontalAlignment="Stretch"
						  BorderBrush="{StaticResource SearchTextBox_SearchIconBorder}"
						  >
                                <Image x:Name="SearchIcon"
							   Stretch="None"
							   Width="17"
							   Height="15" 
							   HorizontalAlignment="Center"
							   VerticalAlignment="Center"
							   Source="pack://application:,,,/Noise.UI;component/Resources/Search.png" ToolTip="Click to search"/>
                            </Border>


                            <Border x:Name="PART_PreviousItem"
						Grid.Column="3"
						VerticalAlignment="Stretch"
						HorizontalAlignment="Stretch"
						BorderBrush="{StaticResource SearchTextBox_SearchIconBorder}">
                                <Image x:Name="PreviousIcon"
						   Stretch="None"
						   Width="17"
						   Height="15" 
						   HorizontalAlignment="Center"
						   VerticalAlignment="Center"
						   Source="pack://application:,,,/Noise.UI;component/Resources/SearchPrevious.png" ToolTip="Previous keywords"
					   />
                            </Border>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True" SourceName="LabelText">
                            <Setter Property="Background" TargetName="LayoutGrid" Value="#F3F9F2" />
                            <Setter Property="Cursor" Value="IBeam" />
                        </Trigger>

                        <Trigger Property="IsMouseOver" Value="False">
                            <Setter Property="Background" TargetName="LayoutGrid" Value="{StaticResource SearchTextBox_InactiveBackground}" />
                        </Trigger>

                        <Trigger Property="IsKeyboardFocusWithin" Value="True">
                            <Setter Property="BorderBrush" Value="{StaticResource SearchTextBox_BorderMouseOver}" />
                        </Trigger>

                        <Trigger Property="HasText" Value="True">
                            <Setter Property="Visibility" TargetName="LabelText" Value="Hidden" />
                        </Trigger>

                        <!--						<MultiTrigger>
							<MultiTrigger.Conditions>
								<Condition Property="HasText" Value="True" />
							</MultiTrigger.Conditions>
							<Setter Property="Source" TargetName="SearchIcon" Value="pack://application:,,,/Noise.UI;component/Resources/SearchClear.png" />
						</MultiTrigger>
-->
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- LinkLabel Style -->
    <Style TargetType="{x:Type NoiseControls:LinkLabel}" BasedOn="{StaticResource {x:Type Label}}">
        <Setter Property="Foreground" Value="Blue"/>
        <Setter Property="HoverForeground" Value="Red"/>

        <Setter Property="HyperlinkStyle">
            <Setter.Value>
                <Style TargetType="{x:Type Hyperlink}">
                    <Setter Property="Foreground" Value="{Binding Foreground, RelativeSource={RelativeSource TemplatedParent}}"/>
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="true">
                            <Setter Property="Foreground"  Value="{Binding HoverForeground, RelativeSource={RelativeSource TemplatedParent}}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </Setter.Value>
        </Setter>

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type NoiseControls:LinkLabel}">
                    <Border Background="{TemplateBinding Background}"
							  BorderThickness="{TemplateBinding BorderThickness}"
							  BorderBrush="{TemplateBinding BorderBrush}"
							  Padding="{TemplateBinding Padding}"
							  SnapsToDevicePixels="true">
                        <TextBlock Background="{TemplateBinding Background}"
								   HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
								   VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
								   SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"><Hyperlink x:Name="PART_InnerHyperlink"
										NavigateUri="{Binding Url, RelativeSource={RelativeSource TemplatedParent}}"
										Style= "{Binding HyperlinkStyle, RelativeSource={RelativeSource TemplatedParent}}"
										Command="{Binding Command, RelativeSource={RelativeSource TemplatedParent}}"
										CommandParameter="{Binding CommandParameter, RelativeSource={RelativeSource TemplatedParent}}"
										CommandTarget="{Binding CommandTarget, RelativeSource={RelativeSource TemplatedParent}}"><Adapters:BindableRun	BoundText="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}"/></Hyperlink></TextBlock>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="LinkLabelBehavior" Value="NeverUnderline">
                            <Setter TargetName="PART_InnerHyperlink" Property="TextDecorations"  Value="None"/>
                        </Trigger>
                        <Trigger Property="LinkLabelBehavior" Value="AlwaysUnderline">
                            <Setter TargetName="PART_InnerHyperlink" Property="TextDecorations" Value="Underline"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver" Value="true"/>
                                <Condition Property="LinkLabelBehavior" Value="HoverUnderline"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="PART_InnerHyperlink" Property="TextDecorations" Value="Underline"/>
                        </MultiTrigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsMouseOver" Value="false"/>
                                <Condition Property="LinkLabelBehavior" Value="HoverUnderline"/>
                            </MultiTrigger.Conditions>
                            <Setter TargetName="PART_InnerHyperlink" Property="TextDecorations" Value="None"/>
                        </MultiTrigger>
                        <Trigger SourceName="PART_InnerHyperlink" Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ButtonFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Rectangle Margin="2" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <LinearGradientBrush x:Key="ButtonNormalBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#F3F3F3" Offset="0"/>
        <GradientStop Color="#EBEBEB" Offset="0.5"/>
        <GradientStop Color="#DDDDDD" Offset="0.5"/>
        <GradientStop Color="#CDCDCD" Offset="1"/>
    </LinearGradientBrush>
    <SolidColorBrush x:Key="ButtonNormalBorder" Color="#FF707070"/>

</ResourceDictionary>